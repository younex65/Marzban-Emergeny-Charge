<!doctype html>
<html lang="fa" dir="rtl" data-bs-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ù†Ø§Ø­ÛŒÙ‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ {{ user.username }}</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path d='M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z'/><path d='M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0'/></svg>">

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500&display=swap" as="style">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" as="style">
  <link rel="preload" href="https://unpkg.com/alpinejs@3.13.7/dist/cdn.min.js" as="script">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500&display=swap">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css">
  
  <style>
    :root {
      --bs-body-font-family: "Vazirmatn", system-ui, -apple-system, sans-serif;
      --bs-body-bg: #000000;
      --my-gray: #18181b;
      --my-dark-gray: #27272a;
      --my-alpha-gray: #3f3f46;
      --my-heading: #ffffff;
      --my-content: #d4d4d8;
      --btn-text-color: #ffffff;
      --btn-hover-bg: #27272a;
      --backdrop-blur: blur(10px);
      --username-icon-color: #006FEE;
      --active-status-icon-color: #17c964;
      --disabled-status-icon-color: #ff2d2d;
      --duration-icon-color: #f5a524;
      --traffic-icon-color: #9253d2;
      --sun-icon-color: #f5a524;
      --moon-icon-color: #9253d2;
      --lang-icon-color: #006FEE;
      --windows-icon-color: #006FEE;
      --android-icon-color: #17c964;
      --apple-icon-color: currentColor;
      --success-feedback-color: #17c964;
    }

    :root[data-bs-theme="light"] {
      --bs-body-bg: #ffffff;
      --my-gray: #f4f4f5;
      --my-dark-gray: #e4e4e7;
      --my-alpha-gray: #d4d4d8;
      --my-heading: #000000;
      --my-content: #3f3f46;
      --btn-text-color: #1c2938;
      --btn-hover-bg: #e4e4e7;
      --backdrop-blur: blur(12px);
    }

    .my-block svg use[href="#person-circle"] {
      color: var(--username-icon-color);
    }
    
    .my-block svg use[href="#check-circle"] {
      color: var(--active-status-icon-color);
    }
    
    .my-block svg use[href="#x-circle"] {
      color: var(--disabled-status-icon-color);
    }
    
    .my-block svg use[href="#clock"] {
      color: var(--duration-icon-color);
    }
    
    .my-block svg use[href="#arrow-down-circle"] {
      color: var(--traffic-icon-color);
    }
    
    .theme-toggle svg use[href="#sun"] {
      color: var(--sun-icon-color);
    }
    
    .theme-toggle svg use[href="#moon"] {
      color: var(--moon-icon-color);
    }
    
    .lang-toggle svg use[href="#translate"] {
      color: var(--lang-icon-color);
    }
    
    .config-link-name svg use[href="#microsoft"] {
      color: var(--windows-icon-color);
    }
    
    .config-link-name svg use[href="#android"] {
      color: var(--android-icon-color);
    }

    [x-cloak] { display: none !important; }

    body {
      background-color: var(--bs-body-bg);
      font-family: var(--bs-body-font-family);
    }

    .my-container {
      max-width: 1024px;
      padding: clamp(50px, 5vw, 75px) clamp(15px, 2.5vw, 25px);
      margin: 0 auto;
    }

    .page-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2rem;
    }

    .header-title-section {
      display: flex;
      align-items: center;
    }

    .header-buttons-section {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .user-avatar {
      width: 49.6px;
      height: 49.6px;
      border-radius: 50%;
      overflow: hidden;
      background-color: var(--my-gray);
      border: none;
      flex-shrink: 0;
      margin-left: 1rem;
    }

    [dir="ltr"] .user-avatar {
      margin-left: 0;
      margin-right: 1rem;
    }

    .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .user-avatar-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 500;
      color: var(--my-content);
    }

    .theme-toggle, .lang-toggle {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 49.6px;
      height: 49.6px;
      border-radius: 50px;
      background-color: var(--my-gray);
      color: var(--my-heading);
      border: none;
      padding: 0;
    }
    
    .theme-toggle:hover, .lang-toggle:hover {
      background-color: var(--my-dark-gray);
    }
    
    .theme-toggle:focus, .lang-toggle:focus {
      outline: none !important;
      box-shadow: none !important;
    }

    .theme-toggle svg, .lang-toggle svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .my-text-heading { color: var(--my-heading); }
    .my-text-content { color: var(--my-content); }

    .my-block,
    .my-block-big {
      border-radius: 0.875rem;
      background-color: var(--my-gray);
      padding: 1.5rem;
      height: 100%;
      border: none;
    }

    .my-block-big {
      padding: 1.5rem;
    }

    .traffic-value {
      font-family: inherit;
      direction: ltr;
      display: inline-block;
      text-align: left;
      width: 100%;
    }

    .bi {
      fill: currentColor;
      width: 20px;
      height: 20px;
    }

    [dir="rtl"] .my-block .bi {
      margin-left: 0.5rem;
      margin-right: 0;
      margin-bottom: 0.15rem;
    }

    [dir="ltr"] .my-block .bi {
      margin-right: 0.5rem;
      margin-left: 0;
      margin-bottom: 0.25rem;
    }

    [dir="ltr"] h3.my-text-heading .bi {
      transform: translateY(-.2rem);
    }

    [dir="rtl"] h3.my-text-heading .bi {
      transform: translateY(-.075rem);
    }

    .connection-buttons {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      gap: 1rem;
      margin-bottom: 2.5rem;
    }

    .my-btn-outline {
      --bs-btn-color: var(--btn-text-color);
      border: none;
      --bs-btn-hover-color: var(--btn-text-color);
      --bs-btn-hover-bg: var(--btn-hover-bg);
      --bs-btn-active-color: var(--btn-text-color);
      --bs-btn-active-bg: var(--btn-hover-bg);
      --bs-border-radius: 0.875rem;
      width: 100%;
      padding: 0.75rem;
      background-color: var(--my-gray);
    }

    [dir="ltr"] .my-btn-outline span {
      vertical-align: -0.1em;    
    }

    [dir="ltr"] .config-link-copy-btn span {
      transform: translateY(0.1rem);
    }

    .modal.my-modal {
      --bs-modal-bg: var(--my-gray);
      --bs-modal-border-radius: 0.875rem;
      --bs-modal-header-padding: 2.5rem 1.5rem 0;
      --bs-modal-header-border-width: 0;
      backdrop-filter: var(--backdrop-blur);
      border: none;
    }

    .modal-body p.my-text-content {
      margin-bottom: 1rem;
      padding: 0 0.5rem;
    }

    .config-link {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      margin-bottom: 0.75rem;
      background-color: var(--my-dark-gray);
      border-radius: 0.875rem;
    }
    
    .config-link-name {
      font-weight: 500;
      color: var(--my-heading);
      flex-grow: 1;
      padding: 0 0.5rem;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .config-link-buttons {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-shrink: 0;
    }

    .config-link-qr-btn {
      width: 40px;
      height: 40px;
      padding: 0;
      border-radius: 0.875rem;
      background-color: var(--bs-body-bg);
      color: var(--btn-text-color);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      border: none;
    }

    .config-link-qr-btn svg {
      width: 20px;
      height: 20px;
    }

    .config-link-qr-btn:hover {
      background-color: var(--my-gray);
    }

    .config-link-copy-btn,
    .download-button,
    .settings-button {
      height: 40px;
      box-sizing: border-box;
      overflow: hidden;
      white-space: nowrap;
      transition: background-color 0.2s ease;
      min-width: 100px;
      padding: 0.5rem 1rem;
      border-radius: 0.875rem;
      background-color: var(--bs-body-bg);
      color: var(--btn-text-color);
      border: none;
      flex-shrink: 0;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      text-decoration: none;
    }

    .config-link-copy-btn:hover,
    .download-button:hover,
    .settings-button:hover {
      background-color: var(--my-gray);
      color: var(--btn-text-color);
    }

    .config-link-copy-btn.copied,
    .download-button.copied,
    .settings-button.copied {
      background-color: var(--success-feedback-color) !important;
      color: white !important;
    }

    .download-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    [dir="ltr"] .download-button span,
     .settings-button span,
     .config-link-name span {
      transform: translateY(0.1rem);
    }

    [dir="rtl"] .settings-button.copied span {
      transform: translateY(-0.1rem);
    }

    .equal-height-container {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .equal-height-container .my-block-big {
      flex: 1;
    }

    .my-step-counter {
      display: block;
      color: var(--my-heading);
      font-weight: 500;
      font-size: 2.5rem;
      user-select: none;
      text-align: right;
    }

    [dir="ltr"] .my-step-counter {
      text-align: left;
    }

    .my-step-counter::after {
      content: counter(step-counter);
      counter-increment: step-counter;
    }

    .my-tab-pane {
      counter-reset: step-counter;
    }

    .qr-modal {
      --bs-modal-width: min(350px, 90%);
      backdrop-filter: var(--backdrop-blur);
    }

    .qr-modal .modal-dialog {
      width: 350px;
      margin: 1rem auto;
    }

    .qr-modal .modal-content {
      background-color: var(--my-gray);
      border-radius: 0.875rem;
      padding: 1rem 1rem 1.5rem;
      border: none;
    }

    .qr-modal .modal-header {
      border-bottom: none;
      padding: 1rem;
      position: relative;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .qr-modal .modal-header .my-text-heading {
      font-size: 1.1rem;
      margin: 0;
      text-align: right;
      flex-grow: 1;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      padding-inline-end: 1rem;
    }

    [dir="ltr"] .qr-modal .modal-header .my-text-heading {
      text-align: left;
      padding-inline-end: 0;
      padding-inline-start: 0;
    }

    .qr-modal .modal-body {
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .qr-modal #qr-canvas {
      background-color: white;
      padding: 1rem;
      border-radius: 0.875rem;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: center;
    }

    .qr-modal #qr-canvas img {
      max-width: 100%;
      height: auto;
    }

    .modal-close-btn {
      position: absolute;
      top: 2rem;
      inset-inline-end: 1.5rem;
      min-width: 60px;
      padding: 0.5rem 1.5rem;
      border-radius: 0.875rem;
      background-color: #ff2d2d;
      color: white;
      border: none;
      font-size: 0.875rem;
      border: none;
    }

    .modal-close-btn:hover {
      background-color: #b12121;
    }

    .modal-close-btn:focus, .modal-close-btn:focus-visible {
      outline: none !important;
      box-shadow: none !important;
    }

    .qr-modal .modal-close-btn {
      position: static;
      flex-shrink: 0;
    }

    @media (max-width: 767.98px) {
      .my-container {
        padding: 50px 15px;
      }
      
      .my-block-big {
        padding: 1.25rem 1.5rem 1.5rem;
      }
    }

    @media (max-width: 400px) {
      .qr-modal .modal-dialog {
        width: 90%;
        margin: 1rem auto;
      }
    }
	
/* <!-- -------------- EMERGENCY BUTTON SECTION CSS-------------- --> */

/* Ø¯Ø± ØªÙ… ØªÛŒØ±Ù‡ */
[data-bs-theme="dark"] .emergency-block {
  background: #18181b !important;
}

/* Ø¯Ø± ØªÙ… Ø±ÙˆØ´Ù† */
[data-bs-theme="light"] .emergency-block {
  background: #f4f4f5 !important;
}

/* Ø¯Ú©Ù…Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒØ´Ø¯Ù‡ */
.emergency-used-btn {
  min-width: 160px;
  height: 42px;
  border-radius: 0.875rem;
}

/* Ø¯Ú©Ù…Ù‡ Ø§ØµÙ„ÛŒ */
.emergency-btn {
  min-width: 160px;
  height: 42px;
  border-radius: 0.875rem;
}

/* Ø¨Ù„Ø§Ú© Ø§ØµÙ„ÛŒ */
.my-block.emergency-block {
  border-radius: 0.875rem !important;  /* Ù‡Ù…Ø§Ù† Ù…Ù‚Ø¯Ø§Ø± Ø±Ø¯ÛŒÙˆØ³ Ø¨Ù„Ø§Ú©â€ŒÙ‡Ø§ */
  overflow: hidden;  /* Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨ÛŒØ±ÙˆÙ† Ø²Ø¯Ù† Ù…Ø­ØªÙˆØ§ Ø§Ø² Ú¯ÙˆØ´Ù‡â€ŒÙ‡Ø§ */
  align-content: center;
}
/* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø±ØªÙØ§Ø¹ Ø¨Ø±Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù…Ø­Ø¯ÙˆØ¯ */
.height-adjusted {
  height: 90px !important;  /* Ø§ÙØ²Ø§ÛŒØ´ Ø§Ø±ØªÙØ§Ø¹ Ú©Ø§Ø¯Ø± Ø¨Ø±Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù…Ø­Ø¯ÙˆØ¯ */
}

/* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯ÛŒÚ¯Ø± */
 .emergency-block {
   height: 60px;  /* Ø§Ø±ØªÙØ§Ø¹ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ú©Ø§Ø¯Ø± */
}
  
/* <!-- -------------- EMERGENCY BUTTON SECTION CSS END-------------- --> */

  </style>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="https://unpkg.com/alpinejs@3.13.7/dist/cdn.min.js" defer></script>
  
  <script>
    function loadQRCode() {
      if (window.QRCode) return Promise.resolve();
      return new Promise((resolve) => {
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js';
        script.onload = resolve;
        document.head.appendChild(script);
      });
    }

    function handleButtonFeedback(button, originalContent, feedbackContent, timeout = 2000) {
      const originalHTML = button.innerHTML;
      button.innerHTML = feedbackContent;
      button.classList.add('copied');
      
      setTimeout(() => {
        button.innerHTML = originalHTML;
        button.classList.remove('copied');
      }, timeout);
    }

    document.addEventListener('alpine:init', () => {
      window.app = {
        darkMode: true,
        currentLang: 'fa',
        avatarUrl: 'https://raw.githubusercontent.com/younex65/public-assets/refs/heads/main/icons/profile2.svg',
        
        translations: {
          fa: {
            subscriptionInfo: 'ØµÙØ­Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ 1PlusVPNğŸš€',
            username: 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ',
            status: 'ÙˆØ¶Ø¹ÛŒØª',
            duration: 'Ù…Ø¯Øª Ø²Ù…Ø§Ù†',
            traffic: 'ØªØ±Ø§ÙÛŒÚ©',
            anonymous: 'Ù†Ø§Ø´Ù†Ø§Ø³',
            active: 'ÙØ¹Ø§Ù„',
            limited: 'Ù…Ø­Ø¯ÙˆØ¯',
            expired: 'Ù…Ù†Ù‚Ø¶ÛŒâ€ŒØ´Ø¯Ù‡',
            disabled: 'ØºÛŒØ±ÙØ¹Ø§Ù„',
            unlimited: 'Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯',
            telegramSupport: 'Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ',
            showConfigs: 'Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§',
            connectionGuide: 'Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§ØªØµØ§Ù„',
            configLinks: 'Ù„ÛŒÙ†Ú©â€Œ Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§',
            configLinksDesc: 'Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ø§Ù†ÙÛŒÚ¯ Ù‡Ø§ÛŒ Ø®ÙˆØ¯ Ø¯Ø± Ø³Ø§ÛŒØ± Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.',
            subscriptionLink: 'Ù„ÛŒÙ†Ú© Ø§Ø´ØªØ±Ø§Ú©',
            close: 'Ø®Ø±ÙˆØ¬',
            copy: 'Ú©Ù¾ÛŒ',
            copied: 'Ú©Ù¾ÛŒ Ø´Ø¯',
            vMessConfig: 'Ú©Ø§Ù†ÙÛŒÚ¯ VMESS',
            vLessConfig: 'Ú©Ø§Ù†ÙÛŒÚ¯ VLESS',
            trojanConfig: 'Ú©Ø§Ù†ÙÛŒÚ¯ Trojan',
            shadowsocksConfig: 'Ú©Ø§Ù†ÙÛŒÚ¯ Shadowsocks',
            configLink: 'Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯',
            downloadApps: 'Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§',
            downloadAppsDesc: 'Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ø¹Ø§Ù…Ù„ Ø®ÙˆØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯',
            hiddifyWindows: 'Ù‡ÛŒØ¯ÛŒÙØ§ÛŒ ÙˆÛŒÙ†Ø¯ÙˆØ²',
            hiddifyAndroid: 'Ù‡ÛŒØ¯ÛŒÙØ§ÛŒ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯',
            hiddifyApple: 'Ù‡ÛŒØ¯ÛŒÙØ§ÛŒ Ø§Ù¾Ù„',
            singboxAndroid: 'Ø³ÛŒÙ†Ú¯â€Œ Ø¨Ø§Ú©Ø³ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯',
            singboxApple: 'Ø³ÛŒÙ†Ú¯â€Œ Ø¨Ø§Ú©Ø³ Ø§Ù¾Ù„',
            addSubscription: 'Ø§ÙØ²ÙˆØ¯Ù† Ø§Ø´ØªØ±Ø§Ú©',
            addSubscriptionDesc: 'Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§ÛŒ Ú©Ù‡ Ù†ØµØ¨ Ú©Ø±Ø¯Ù‡ Ø§ÛŒØ¯ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¢Ù† Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯',
            hiddifySettings: 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ù‡ÛŒØ¯ÛŒÙØ§ÛŒ',
            singboxSettings: 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³ÛŒÙ†Ú¯ Ø¨Ø§Ú©Ø³',
            connectAndUse: 'Ø§ØªØµØ§Ù„ Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡',
            connectAndUseDesc: 'Ø¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡ÛŒØ¯ÛŒÙØ§ÛŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ CONNECT Ùˆ Ø¯Ø± Ø³ÛŒÙ†Ú¯ Ø¨Ø§Ú©Ø³ Ø±ÙˆÛŒ ENABLE Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯. Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒ Ø´ÙˆØ¯ Ø±ÙˆØ²Ø§Ù†Ù‡ Ù„ÛŒÙ†Ú© Ø§Ø´ØªØ±Ø§Ú© Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø² Ø¯Ø§Ø®Ù„ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯Ù‡ Ø¢Ù¾Ø¯ÛŒØª Ú©Ù†ÛŒØ¯',
            qrCode: 'Ú©Ø¯ QR',
            download: 'Ø¯Ø§Ù†Ù„ÙˆØ¯',
            start: 'Ø´Ø±ÙˆØ¹',
            settings: 'Ø§ÙØ²ÙˆØ¯Ù†',
            enter: 'ÙˆØ±ÙˆØ¯'
          },
          en: {
            subscriptionInfo: ' 1PlusVPNğŸš€ Subscription Page',
            username: 'Username',
            status: 'Status',
            duration: 'Duration',
            traffic: 'Traffic',
            anonymous: 'Anonymous',
            active: 'Active',
            limited: 'Limited',
            expired: 'Expired',
            disabled: 'Disabled',
            unlimited: 'Unlimited',
            telegramSupport: 'Support',
            showConfigs: 'Configs',
            connectionGuide: 'Connection Guide',
            configLinks: 'Config Links',
            configLinksDesc: 'You can use the following links to use your configs in other applications.',
            subscriptionLink: 'Subscription Link',
            close: 'Close',
            copy: 'Copy',
            copied: 'Copied',
            vMessConfig: 'VMESS Config',
            vLessConfig: 'VLESS Config',
            trojanConfig: 'Trojan Config',
            shadowsocksConfig: 'Shadowsocks Config',
            configLink: 'Config Link',
            downloadApps: 'Download Apps',
            downloadAppsDesc: 'Download the appropriate app for your operating system',
            hiddifyWindows: 'Hiddify Windows',
            hiddifyAndroid: 'Hiddify Android',
            hiddifyApple: 'Hiddify Apple',
            singboxAndroid: 'Sing-box Android',
            singboxApple: 'Sing-box Apple',
            addSubscription: 'Add Subscription',
            addSubscriptionDesc: 'Click on the relevant button for the app you have installed',
            hiddifySettings: 'Add to Hiddify',
            singboxSettings: 'Add to Sing-box',
            connectAndUse: 'Connect and Use',
            connectAndUseDesc: 'Click CONNECT in Hiddify app or ENABLE in Sing-box. It is recommended to update your subscription link daily from within the app.',
            qrCode: 'QR Code',
            download: 'Download',
            start: 'Start',
            settings: 'Add',
            enter: 'Enter'
          }
        },

        init() {
          Alpine.store('app', this);

          Alpine.data('qrModal', () => ({
            title: '',
            get closeText() {
              return this.$store.app.translations[this.$store.app.currentLang].close;
            },
            setTitle(newTitle) {
              this.title = newTitle;
            }
          }));

          const savedTheme = localStorage.getItem('theme');
          if (savedTheme) {
            this.darkMode = savedTheme === 'dark';
            document.documentElement.setAttribute('data-bs-theme', savedTheme);
          } else {
            this.darkMode = document.documentElement.getAttribute('data-bs-theme') === 'dark';
          }
          
          const savedLang = localStorage.getItem('lang');
          if (savedLang) {
            this.currentLang = savedLang;
            this.applyLanguage(savedLang);
          }

          const savedAvatar = localStorage.getItem('avatarUrl');
          if (savedAvatar) {
            this.avatarUrl = savedAvatar;
          }

          document.addEventListener('show-qr', async function(e) {
            await loadQRCode();
            const qrModal = new bootstrap.Modal(document.getElementById('qr-modal'));
            const qrContainer = document.getElementById('qr-canvas');
            
            const title = e.detail.name || e.detail.url;
            window.dispatchEvent(new CustomEvent('show-qr-title', { detail: title }));
            
            qrContainer.innerHTML = '';
            
            new QRCode(qrContainer, {
              text: e.detail.url,
              width: 256,
              height: 256,
              colorDark: '#000000',
              colorLight: '#ffffff'
            });
            
            qrModal.show();
          });
        },

        toggleTheme() {
          this.darkMode = !this.darkMode;
          const theme = this.darkMode ? 'dark' : 'light';
          document.documentElement.setAttribute('data-bs-theme', theme);
          localStorage.setItem('theme', theme);
        },

        toggleLang() {
          this.currentLang = this.currentLang === 'fa' ? 'en' : 'fa';
          this.applyLanguage(this.currentLang);
          localStorage.setItem('lang', this.currentLang);
        },

        applyLanguage(lang) {
          if (lang === 'en') {
            document.documentElement.setAttribute('dir', 'ltr');
            document.documentElement.setAttribute('lang', 'en');
          } else {
            document.documentElement.setAttribute('dir', 'rtl');
            document.documentElement.setAttribute('lang', 'fa');
          }
        },

        formatBytes(bytes) {
          if (!bytes || bytes.toString().startsWith('{')) return '0';
          bytes = parseInt(bytes);
          if (bytes === 0) return '0 B';
          
          const units = ['B', 'KB', 'MB', 'GB', 'TB'];
          let i = 0;
          
          while (bytes >= 1024 && i < units.length - 1) {
            bytes /= 1024;
            i++;
          }
          
          return `${bytes.toFixed(2)} ${units[i]}`;
        },

        getStatusText(statusValue) {
          const statusMap = {
            'active': this.translations[this.currentLang].active,
            'limited': this.translations[this.currentLang].limited,
            'expired': this.translations[this.currentLang].expired,
            'disabled': this.translations[this.currentLang].disabled
          };
          return statusValue.startsWith('{') ? this.translations[this.currentLang].anonymous : (statusMap[statusValue] || this.translations[this.currentLang].anonymous);
        },

        getExpireText(expire) {
          if (!expire) return this.translations[this.currentLang].unlimited;
          if (expire.startsWith('{')) return this.translations[this.currentLang].anonymous;
          
          if (this.currentLang === 'fa') {
            return `ØªØ§ ${new Date(expire).toLocaleDateString('fa-IR')}`;
          } else {
            return `Until ${new Date(expire).toLocaleDateString('en-US')}`;
          }
        },

        getTrafficText(usedTraffic, dataLimit) {
          if (dataLimit === null || dataLimit === 'null') {
            return `<span class="traffic-value">${this.formatBytes(usedTraffic)} / âˆ</span>`;
          }
          
          if (dataLimit.toString().startsWith('{')) {
            return this.translations[this.currentLang].anonymous;
          }
          
          return `<span class="traffic-value">${this.formatBytes(usedTraffic)} / ${this.formatBytes(dataLimit)}</span>`;
        },

        importHiddify() {
          window.location.href = `hiddify://import/${'{{ user.subscription_url }}'}`;
        },
        
        importSingbox() {
          window.location.href = `sing-box://import-remote-profile?url=${'{{ user.subscription_url }}'}#{{ user.username }}`;
        },

        copyLink(link, button) {
          navigator.clipboard.writeText(link);
          button.innerHTML = `<svg class='bi' width='16' height='16'><use href='#check-square'></use></svg> <span>${this.translations[this.currentLang].copied}</span>`;
          button.classList.add('copied');
          
          setTimeout(() => {
            button.innerHTML = `<svg class='bi' width='16' height='16'><use href='#copy'></use></svg> <span>${this.translations[this.currentLang].copy}</span>`;
            button.classList.remove('copied');
          }, 2000);
        },

        setAvatar(url) {
          this.avatarUrl = url;
          localStorage.setItem('avatarUrl', url);
        },
        
        getInitial(username) {
          if (!username || username.startsWith('{')) return '?';
          return username.charAt(0).toUpperCase();
        }
      };
    });
  </script>
  
<!-- -------------- EMERGENCY BUTTON SECTION SCRIPT-------------- -->
<script>
function emergencyWidget() {
  return {
    // state
    used: false,
    loading: false,
    message: '',
    title: 'Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ',
    subtitle: '(Ø¯Ø± ØµÙˆØ±Øª Ø§ØªÙ…Ø§Ù… Ø­Ø¬Ù… ÛŒØ§ Ø²Ù…Ø§Ù†,ÙØ¹Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯)',
    username: null,
    status: null,         // expected values: 'active' | 'limited' | 'expired' | 'disabled' | ...
    baseUrl: null,
    // configurable
    REQUEST_TIMEOUT_MS: 8000, // 8s timeout
    // helpers
    _readDataAttributes() {
      // this.$el is Alpine component root element
      try {
        const ds = (this.$el && this.$el.dataset) ? this.$el.dataset : {};
        this.username = (ds.username || '').trim() || null;
        // normalize status to string lower-case if present
        this.status = (ds.status || '').toString().trim().toLowerCase() || null;
      } catch (e) {
        this.username = null;
        this.status = null;
      }
    },

    _buildBaseUrl() {
      try {
        const { protocol, hostname } = window.location;
        return `${protocol}//${hostname}`;
      } catch {
        return '';
      }
    },

    init() {
      // read dataset first
      this._readDataAttributes();
      this.baseUrl = this._buildBaseUrl();

      // determine subtitle based on status (robust to missing status)
      if (this.status === 'active') {
        this.subtitle = '(Ø¯Ø± ØµÙˆØ±Øª Ø§ØªÙ…Ø§Ù… Ø­Ø¬Ù… ÛŒØ§ Ø²Ù…Ø§Ù†,ÙØ¹Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯)';
      } else if (this.status === 'limited' || this.status === 'expired') {
        this.subtitle = '(ÙÙ‚Ø· ÛŒÚ©Ø¨Ø§Ø± Ø¯Ø± Ø·ÙˆÙ„ Ù‡Ø± Ø¯ÙˆØ±Ù‡ ØªÙ…Ø¯ÛŒØ¯ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯)';
      } else {
        // fallback
        this.subtitle = 'Ø§Ú¯Ø± ÙˆØ¶Ø¹ÛŒØª Ø´Ù…Ø§ Ù…Ø­Ø¯ÙˆØ¯ ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø§Ø³ØªØŒ Ø§Ù…Ú©Ø§Ù† Ø¯Ø±ÛŒØ§ÙØª Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.';
      }

      // if username missing, try to read from a global JS variable or store (optional)
      if (!this.username && window.SERVER_USER && window.SERVER_USER.username) {
        this.username = window.SERVER_USER.username;
      }

      // If no username, show message and disable button
      if (!this.username) {
        this.message = 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³ØªØ› Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ ØºÛŒØ± ÙØ¹Ø§Ù„ Ø´Ø¯.';
        return;
      }

      // Show button only for limited/expired -- but still check the service to know if already used
      if (this.status !== 'limited' && this.status !== 'expired') {
        // don't hide completely: still check server in case the status was not injected
        // but avoid showing as primary action
      }

      // Check remote emergency-api for used flag
      this._checkUsedFlag();
    },

    async _fetchWithTimeout(url, opts = {}, timeoutMs = 8000) {
      const controller = new AbortController();
      const id = setTimeout(() => controller.abort(), timeoutMs);
      try {
        const merged = {...opts, signal: controller.signal, headers: {...(opts.headers||{}), 'Accept': 'application/json'} };
        const res = await fetch(url, merged);
        clearTimeout(id);
        return res;
      } catch (err) {
        clearTimeout(id);
        throw err;
      }
    },

    async _checkUsedFlag() {
      if (!this.username) return;
      const url = `${this.baseUrl}/emergency/${encodeURIComponent(this.username)}`;
      try {
        const res = await this._fetchWithTimeout(url, { method: 'GET', credentials: 'same-origin' }, this.REQUEST_TIMEOUT_MS);
        if (!res.ok) {
          // show server error but don't break page
          this.message = 'Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ.';
          return;
        }
        const json = await res.json();
        this.used = !!json.used;
        if (this.used) {
          this.message = 'Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø² Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.';
        }
      } catch (err) {
        // network error or abort
        if (err.name === 'AbortError') {
          this.message = 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø´Ø¯. Ø§ØªØµØ§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.';
        } else {
          this.message = 'Ø¹Ø¯Ù… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ.';
        }
      }
    },

    async requestEmergency() {
      // double-check conditions
      if (!this.username) {
        this.message = 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª.';
        return;
      }
      if (this.loading) return;
      if (this.used) {
        this.message = 'Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø² Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.';
        return;
      }
      // require explicit user confirmation
      if (!confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ ÙÙ‚Ø· ÛŒÚ©Ø¨Ø§Ø± Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª.')) return;

      this.loading = true;
      this.message = '';

      const url = `${this.baseUrl}/emergency/${encodeURIComponent(this.username)}/grant`;
      const payload = {
        add_bytes: 500 * 1024 * 1024,   // 500 MB
        add_seconds: 12 * 3600          // 12 hours
      };

      try {
        const res = await this._fetchWithTimeout(
          url,
          {
            method: 'POST',
            credentials: 'same-origin',
            headers: {
              'Content-Type': 'application/json',
              'Accept': 'application/json',
              'X-Requested-With': 'XMLHttpRequest' // mild hint to server
            },
            body: JSON.stringify(payload)
          },
          this.REQUEST_TIMEOUT_MS
        );

        if (!res.ok) {
          // try to parse JSON error if any
          let text = await res.text();
          try {
            const j = JSON.parse(text);
            this.message = j.detail || j.error || JSON.stringify(j);
          } catch {
            this.message = `Ø®Ø·Ø§: ${res.status} ${text}`;
          }
          this.loading = false;
          return;
        }

        // success
        this.message = 'Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯.';
        this.used = true;

        // optimistic UI: hide button, then refresh panel after short delay
        setTimeout(() => {
          // try soft reload / re-fetch user info â€” if you prefer full reload:
          // location.reload();
          // but we'll attempt a soft reload by dispatching a custom event (if main app listens)
          window.dispatchEvent(new CustomEvent('emergency-granted', { detail: { username: this.username } }));
          // fallback: full reload after short delay
          setTimeout(() => location.reload(), 1200);
        }, 600);

      } catch (err) {
        if (err.name === 'AbortError') {
          this.message = 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø´Ø¯Ø› Ø§Ø±ØªØ¨Ø§Ø· Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.';
        } else {
          this.message = 'Ø¹Ø¯Ù… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ.';
        }
      } finally {
        this.loading = false;
      }
    }
  };
}
</script>
<!-- -------------- EMERGENCY BUTTON SECTION SCRIPT END-------------- -->
  
</head>

<body>
<svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="android" viewBox="0 0 24 24"><path d="M17.6 9.48l1.84-3.18c.16-.31.04-.69-.26-.85-.29-.15-.65-.06-.83.22l-1.88 3.24c-2.86-1.21-6.08-1.21-8.94 0L5.65 5.67c-.19-.29-.58-.38-.87-.2-.28.18-.37.54-.22.83L6.4 9.48C3.3 11.25 1.28 14.44 1 18h22c-.28-3.56-2.3-6.75-5.4-8.52zM7 15.25c-.69 0-1.25-.56-1.25-1.25S6.31 12.75 7 12.75s1.25.56 1.25 1.25S7.69 15.25 7 15.25zm10 0c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25z"/></symbol>
  <symbol id="microsoft" viewBox="0 0 16 16"><path d="M7.462 0H0v7.19h7.462V0zM16 0H8.538v7.19H16V0zM7.462 8.211H0V16h7.462V8.211zm8.538 0H8.538V16H16V8.211z"/></symbol>
  <symbol id="apple" viewBox="0 0 16 16"><path d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516s1.52.087 2.475-1.258.762-2.391.728-2.43m3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422s1.675-2.789 1.698-2.854-.597-.79-1.254-1.157a3.7 3.7 0 0 0-1.563-.434c-.108-.003-.483-.095-1.254.116-.508.139-1.653.589-1.968.607-.316.018-1.256-.522-2.267-.665-.647-.125-1.333.131-1.824.328-.49.196-1.422.754-2.074 2.237-.652 1.482-.311 3.83-.067 4.56s.625 1.924 1.273 2.796c.576.984 1.34 1.667 1.659 1.899s1.219.386 1.843.067c.502-.308 1.408-.485 1.766-.472.357.013 1.061.154 1.782.539.571.197 1.111.115 1.652-.105.541-.221 1.324-1.059 2.238-2.758q.52-1.185.473-1.282"/></symbol>
  <symbol id="cloud-plus" viewBox="0 0 16 16"><path fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" d="M8 5.5v5M5.5 8h5"/><path fill="none" stroke="currentColor" stroke-width="1" d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/></symbol>
  <symbol id="person-circle" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8" fill="currentColor" opacity="0.3"/><path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/><path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/></symbol>
  <symbol id="clock" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8" fill="currentColor" opacity="0.3"/><path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/></symbol>
  <symbol id="arrow-down-circle" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8" fill="currentColor" opacity="0.3"/><path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293z"/></symbol>
  <symbol id="check-circle" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8" fill="currentColor" opacity="0.3"/><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/></symbol>
  <symbol id="x-circle" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8" fill="currentColor" opacity="0.3"/><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/></symbol>
  <symbol id="cloud-arrow-down" viewBox="0 0 16 16"><path fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" d="M8 9.5v-4m0 4l2-2m-4 0l2 2"/><path fill="none" stroke="currentColor" stroke-width="1" d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/></symbol>
  <symbol id="copy" viewBox="0 0 16 16"><path fill="none" stroke="currentColor" stroke-width="1" d="M4 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2z"/><path fill="none" stroke="currentColor" stroke-width="1" d="M2 6a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V6z"/></symbol>
  <symbol id="check-square" viewBox="0 0 16 16"><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/></symbol>
  <symbol id="cloud-check" viewBox="0 0 16 16"><path fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" d="M6 8.5l1.5 1.5L10 7"/><path fill="none" stroke="currentColor" stroke-width="1" d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/></symbol>
  <symbol id="info-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></symbol>
  <symbol id="filter-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 11.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5"/></symbol>
  <symbol id="sun" viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/></symbol>
  <symbol id="moon" viewBox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/></symbol>
  <symbol id="qr-code" viewBox="0 0 24 24"><path d="M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm8-12v8h8V3h-8zm6 6h-4V5h4v4zM13 13h2v2h-2zM15 15h2v2h-2zM13 17h2v2h-2zM11 13h2v2h-2zM15 17h2v2h-2zM17 13h2v2h-2zM17 17h2v2h-2zM19 19h2v2h-2zM19 15h2v2h-2z"/></symbol>
  <symbol id="question-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/></symbol>
  <symbol id="translate" viewBox="0 0 16 16"><path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"/><path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"/></symbol>
  <symbol id="gear-fill" viewBox="0 0 16 16"><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/></symbol>
</svg>

  <div class="container my-container" x-data="app" x-cloak>
    <div class="page-header">
      <div class="header-title-section">
        <div class="user-avatar">
          <template x-if="avatarUrl">
            <img :src="avatarUrl" alt="User Avatar">
          </template>
          <template x-if="!avatarUrl">
            <div class="user-avatar-placeholder" x-text="getInitial('{{ user.username }}')"></div>
          </template>
        </div>
        <h2 class="my-text-heading fw-bold mb-0" x-text="translations[currentLang].subscriptionInfo"></h2>
      </div>
      
      <div class="header-buttons-section">
        <button class="lang-toggle" @click="toggleLang">
          <svg class="bi"><use href="#translate"></use></svg>
        </button>
        <button class="theme-toggle" @click="toggleTheme">
          <svg class="bi" x-show="darkMode"><use href="#sun"></use></svg>
          <svg class="bi" x-show="!darkMode"><use href="#moon"></use></svg>
        </button>
      </div>
    </div>
    
    <div class="row row-cols-2 row-cols-md-4 g-3 mb-4">
      <div class="col">
        <div class="my-block" x-data="{username: '{{ user.username }}'}">
          <div class="d-flex flex-row align-items-center mb-3">
            <svg class="bi"><use href="#person-circle"></use></svg>
            <h5 class="my-text-heading mb-0" x-text="translations[currentLang].username"></h5>
          </div>
          <p class="text-truncate my-text-content mb-0" x-text="username.startsWith('{') ? translations[currentLang].anonymous : username"></p>
        </div>
      </div>
      
      <div class="col">
        <div class="my-block" x-data="{statusValue: '{{ user.status.value }}'}">
          <div class="d-flex flex-row align-items-center mb-3">
            <svg class="bi"><use x-bind:href="statusValue == 'active' || statusValue.startsWith('{') ? '#check-circle' : '#x-circle'"></use></svg>
            <h5 class="my-text-heading mb-0" x-text="translations[currentLang].status"></h5>
          </div>
          <p class="text-truncate my-text-content mb-0" x-text="getStatusText(statusValue)"></p>
        </div>
      </div>
      
      <div class="col">
        <div class="my-block" x-data="{expire: '{% if user.expire %}{{ user.expire | datetime }}{% endif %}'}">
          <div class="d-flex flex-row align-items-center mb-3">
            <svg class="bi"><use href="#clock"></use></svg>
            <h5 class="my-text-heading mb-0" x-text="translations[currentLang].duration"></h5>
          </div>
          <p class="text-truncate my-text-content mb-0" x-text="getExpireText(expire)"></p>
        </div>
      </div>
      
      <div class="col">
        <div class="my-block" x-data="{
          usedTraffic: {{ user.used_traffic }},
          dataLimit: {{ user.data_limit if user.data_limit else 'null' }}
        }">
          <div class="d-flex flex-row align-items-center mb-3">
            <svg class="bi"><use href="#arrow-down-circle"></use></svg>
            <h5 class="my-text-heading mb-0" x-text="translations[currentLang].traffic"></h5>
          </div>
          <p class="text-truncate my-text-content mb-0" x-html="getTrafficText(usedTraffic, dataLimit)"></p>
        </div>
      </div>
    </div>

<!-- Emergency widget container: ØªÙˆØ¬Ù‡ Ú©Ù†ÛŒØ¯ data-username Ùˆ data-status Ø¨Ø§ÛŒØ¯ ØªÙˆØ³Ø· Ø³Ø±ÙˆØ± (Jinja) Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø´ÙˆÙ†Ø¯ -->
<div class="row g-3 mb-3"
     x-data="emergencyWidget()"
     x-init="init()"
     x-cloak
     data-username="{{ user.username }}"
     data-status="{{ user.status.value }}">
  <div class="col">
    <div class="my-block emergency-block p-3 rounded"
         :class="{'height-adjusted': status === 'limited' || status === 'expired'}">

      <div class="d-flex align-items-center justify-content-between">
        <div>
          <div class="fw-semibold fs-5 my-text-heading d-flex align-items-center">
            <span x-text="title"></span>
            <span style="font-size: 0.8rem; margin-left: 10px; font-weight: 500; margin-right: 7px;"
                  x-text="subtitle"></span>
          </div>
        </div>

        <div>
          <button
            x-show="(status === 'limited' || status === 'expired') && !used"
            @click="requestEmergency"
            :disabled="loading"
            class="btn btn-warning fw-bold emergency-btn"
            :class="{ 'opacity-75': loading }">
            <span x-show="!loading">Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ</span>
            <span x-show="loading">Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¹Ù…Ø§Ù„â€¦</span>
          </button>

          <button
            x-show="(status === 'limited' || status === 'expired') && used"
            class="btn btn-outline-secondary emergency-used-btn"
            disabled>
            Ø´Ø§Ø±Ú˜ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡
          </button>
        </div>
      </div>

      <template x-if="message">
        <div class="mt-2 small fw-semibold my-text-content" x-text="message"></div>
      </template>

    </div>
  </div>
</div>
<!-- Emergency widget container: ØªÙˆØ¬Ù‡ Ú©Ù†ÛŒØ¯ data-username Ùˆ data-status Ø¨Ø§ÛŒØ¯ ØªÙˆØ³Ø· Ø³Ø±ÙˆØ± (Jinja) Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø´ÙˆÙ†Ø¯ -->

    <div class="connection-buttons">
     <a class="btn my-btn-outline" href="https://t.me/oneplusvpn_support" role="button" rel="noopener noreferrer" target="_blank">
      <svg class="bi me-1"><use href="#info-circle"></use></svg>
       <span x-text="translations[currentLang].telegramSupport"></span>
     </a>
    <button class="btn my-btn-outline" data-bs-toggle="modal" data-bs-target="#get-link-modal">
     <svg class="bi me-1"><use href="#filter-circle"></use></svg>
      <span x-text="translations[currentLang].showConfigs"></span>
    </button>
   </div>

    <h3 class="my-text-heading mb-4 fw-bold d-flex align-items-center gap-2" 
        :class="currentLang === 'fa' ? 'text-start' : 'text-end'"
        style="font-size: 1.5rem; letter-spacing: -0.5px;">
        <svg class="bi" style="width: 1.2em; height: 1.2em;"><use href="#question-circle"></use></svg>
        <span x-text="translations[currentLang].connectionGuide"></span>
    </h3>
    
    <div class="modal my-modal fade" id="get-link-modal" tabindex="-1" aria-labelledby="linkModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header position-relative">
            <h5 class="my-text-heading fw-semibold mb-0" id="linkModalLabel" x-text="translations[currentLang].configLinks"></h5>
            <button type="button" 
                    class="modal-close-btn" 
                    data-bs-dismiss="modal"
                    x-text="translations[currentLang].close">
            </button>
          </div>
          <div class="modal-body" x-data="{
            subscriptionUrl: '{{ user.subscription_url }}',
            links: [{% for link in user.links %}'{{ link }}'{% if not loop.last %}, {% endif %}{% endfor %}],
            getLinkName(link) {
              if (link === this.subscriptionUrl) return translations[currentLang].subscriptionLink;
              
              const protocols = {
                'vmess://': link => {
                  try { 
                    const config = JSON.parse(atob(link.replace('vmess://', '')));
                    return config.ps || translations[currentLang].vMessConfig;
                  } catch { 
                    return translations[currentLang].vMessConfig; 
                  }
                },
                'vless://': link => {
                  try {
                    const url = new URL(link);
                    const params = new URLSearchParams(url.hash.slice(1));
                    return params.get('remark') || decodeURIComponent(url.hash.slice(1)) || translations[currentLang].vLessConfig;
                  } catch {
                    return translations[currentLang].vLessConfig;
                  }
                },
                'trojan://': link => {
                  try {
                    const url = new URL(link);
                    const params = new URLSearchParams(url.hash.slice(1));
                    return params.get('remark') || translations[currentLang].trojanConfig;
                  } catch {
                    return translations[currentLang].trojanConfig;
                  }
                },
                'ss://': link => {
                  try {
                    const decoded = atob(link.replace('ss://', '').split('@')[0]);
                    const parts = decoded.split(':');
                    return parts.length > 1 ? decodeURIComponent(parts[1]) || translations[currentLang].shadowsocksConfig : translations[currentLang].shadowsocksConfig;
                  } catch {
                    return translations[currentLang].shadowsocksConfig;
                  }
                }
              };
              
              for (const prefix in protocols) {
                if (link.startsWith(prefix)) {
                  return protocols[prefix](link);
                }
              }
              
              try {
                const url = new URL(link);
                const params = new URLSearchParams(url.hash.slice(1));
                return params.get('remark') || decodeURIComponent(url.hash.slice(1)) || translations[currentLang].configLink;
              } catch {
                return link.includes('#') ? decodeURIComponent(link.split('#')[1]) || translations[currentLang].configLink : translations[currentLang].configLink;
              }
            }
          }">
            <p class="my-text-content mb-3" x-text="translations[currentLang].configLinksDesc"></p>
            <div class="mb-3">
              <div class="config-link">
                <div class="config-link-name" x-text="translations[currentLang].subscriptionLink"></div>
                <div class="config-link-buttons">
                  <button class="config-link-qr-btn" @click="$dispatch('show-qr', {url: subscriptionUrl, name: translations[currentLang].subscriptionLink})">
                    <svg class="bi"><use href="#qr-code"></use></svg>
                  </button>
                  <button class="config-link-copy-btn" 
                  @click="copyLink(subscriptionUrl, $el)" 
                  x-html="`<svg class='bi' width='14' height='14'><use href='#copy'></use></svg> <span>${translations[currentLang].copy}</span>`">
          </button>
                </div>
              </div>
              
              <template x-for="(link, index) in links" :key="index">
                <div class="config-link">
                  <div class="config-link-name" x-text="getLinkName(link)"></div>
                  <div class="config-link-buttons">
                    <button class="config-link-qr-btn" @click="$dispatch('show-qr', {url: link, name: getLinkName(link)})">
                      <svg class="bi"><use href="#qr-code"></use></svg>
                    </button>
                    <button class="config-link-copy-btn" 
                    @click="copyLink(link, $el)" 
                    x-html="`<svg class='bi' width='16' height='16'><use href='#copy'></use></svg> <span>${translations[currentLang].copy}</span>`">
            </button>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="tab-content">
      <div id="tab-pc" class="tab-pane my-tab-pane fade show active">
        <div class="row g-3">
          <div class="col-12 col-lg-6">
            <div class="my-block-big h-100">
              <span class="my-step-counter mb-3"></span>
              <h5 class="my-text-heading fw-semibold" x-text="translations[currentLang].downloadApps"></h5>
              <p class="my-text-content" x-text="translations[currentLang].downloadAppsDesc"></p>
              
              <div class="download-buttons">
                <div class="config-link">
                  <div class="config-link-name">
                    <svg class="bi" width="16" height="16"><use href="#microsoft"></use></svg>
                    <span x-text="translations[currentLang].hiddifyWindows"></span>
                  </div>
                  <div class="config-link-buttons">
                    <a class="download-button" 
                    href="https://github.com/hiddify/hiddify-next/releases/latest/download/Hiddify-Windows-Setup-x64.exe" 
                    role="button" 
                    rel="noopener noreferrer" 
                    target="_blank" 
                    @click="handleButtonFeedback($el, $el.innerHTML, `<svg class='bi' width='16' height='16'><use href='#cloud-check'></use></svg> <span>${translations[currentLang].start}</span>`); setTimeout(() => window.open('https://github.com/hiddify/hiddify-next/releases/latest/download/Hiddify-Windows-Setup-x64.exe', '_blank'), 300);">
                   <svg class="bi" width="16" height="16"><use href="#cloud-arrow-down"></use></svg>
                   <span x-text="translations[currentLang].download || 'Ø¯Ø§Ù†Ù„ÙˆØ¯'"></span>
                 </a>
                  </div>
                </div>

                <div class="config-link">
                  <div class="config-link-name">
                    <svg class="bi" width="16" height="16"><use href="#android"></use></svg>
                    <span x-text="translations[currentLang].hiddifyAndroid"></span>
                  </div>
                  <div class="config-link-buttons">
                    <a class="download-button" 
                       href="https://github.com/hiddify/hiddify-next/releases/latest/download/Hiddify-Android-universal.apk" 
                       role="button" 
                       rel="noopener noreferrer" 
                       target="_blank" 
                       @click="handleButtonFeedback($el, $el.innerHTML, `<svg class='bi' width='16' height='16'><use href='#cloud-check'></use></svg> <span>${translations[currentLang].start}</span>`); setTimeout(() => window.open('https://github.com/hiddify/hiddify-next/releases/latest/download/Hiddify-Android-universal.apk', '_blank'), 300);">
                       <svg class="bi" width="16" height="16"><use href="#cloud-arrow-down"></use></svg>
                      <span x-text="translations[currentLang].download || 'Ø¯Ø§Ù†Ù„ÙˆØ¯'"></span>
                    </a>
                  </div>
                </div>

                <div class="config-link">
                  <div class="config-link-name">
                    <svg class="bi" width="16" height="16"><use href="#apple"></use></svg>
                    <span x-text="translations[currentLang].hiddifyApple"></span>
                  </div>
                  <div class="config-link-buttons">
                    <a class="download-button" 
                       href="https://apps.apple.com/us/app/hiddify-proxy-vpn/id6596777532" 
                       role="button" 
                       rel="noopener noreferrer" 
                       target="_blank" 
                       @click="handleButtonFeedback($el, $el.innerHTML, `<svg class='bi' width='16' height='16'><use href='#cloud-check'></use></svg> <span>${translations[currentLang].start}</span>`); setTimeout(() => window.open('https://apps.apple.com/us/app/hiddify-proxy-vpn/id6596777532', '_blank'), 300);">
                      <svg class="bi" width="16" height="16"><use href="#cloud-arrow-down"></use></svg>
                      <span x-text="translations[currentLang].download || 'Ø¯Ø§Ù†Ù„ÙˆØ¯'"></span>
                    </a>
                  </div>
                </div>

                <div class="config-link">
                  <div class="config-link-name">
                    <svg class="bi" width="16" height="16"><use href="#android"></use></svg>
                    <span x-text="translations[currentLang].singboxAndroid"></span>
                  </div>
                  <div class="config-link-buttons">
                    <a class="download-button" 
                       href="https://github.com/SagerNet/sing-box/releases/download/v1.11.6/SFA-1.11.6-universal.apk" 
                       role="button" 
                       rel="noopener noreferrer" 
                       target="_blank" 
                       @click="handleButtonFeedback($el, $el.innerHTML, `<svg class='bi' width='16' height='16'><use href='#cloud-check'></use></svg> <span>${translations[currentLang].start}</span>`); setTimeout(() => window.open('https://github.com/SagerNet/sing-box/releases/download/v1.11.6/SFA-1.11.6-universal.apk', '_blank'), 300);">
                      <svg class="bi" width="16" height="16"><use href="#cloud-arrow-down"></use></svg>
                      <span x-text="translations[currentLang].download || 'Ø¯Ø§Ù†Ù„ÙˆØ¯'"></span>
                    </a>
                  </div>
                </div>

                <div class="config-link">
                  <div class="config-link-name">
                    <svg class="bi" width="16" height="16"><use href="#apple"></use></svg>
                    <span x-text="translations[currentLang].singboxApple"></span>
                  </div>
                  <div class="config-link-buttons">
                    <a class="download-button" 
                       href="https://apps.apple.com/us/app/sing-box-vt/id6673731168" 
                       role="button" 
                       rel="noopener noreferrer" 
                       target="_blank" 
                       @click="handleButtonFeedback($el, $el.innerHTML, `<svg class='bi' width='16' height='16'><use href='#cloud-check'></use></svg> <span>${translations[currentLang].start}</span>`); setTimeout(() => window.open('https://apps.apple.com/us/app/sing-box-vt/id6673731168', '_blank'), 300);">
                      <svg class="bi" width="16" height="16"><use href="#cloud-arrow-down"></use></svg>
                      <span x-text="translations[currentLang].download || 'Ø¯Ø§Ù†Ù„ÙˆØ¯'"></span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-12 col-lg-6">
            <div class="equal-height-container">
              <div class="my-block-big mb-3">
                <span class="my-step-counter mb-3"></span>
                <h5 class="my-text-heading fw-semibold" x-text="translations[currentLang].addSubscription"></h5>
                <p class="my-text-content" x-text="translations[currentLang].addSubscriptionDesc"></p>
                
                <div class="download-buttons">
                  <div class="config-link">
                    <div class="config-link-name">
                      <svg class="bi" width="16" height="16"><use href="#gear-fill"></use></svg>
                      <span x-text="translations[currentLang].hiddifySettings"></span>
                    </div>
                    <div class="config-link-buttons">
                      <a class="settings-button" 
                         href="#" 
                         @click.prevent="importHiddify(); handleButtonFeedback($el, $el.innerHTML, `<svg class='bi' width='16' height='16'><use href='#cloud-check'></use></svg> <span>${translations[currentLang].enter}</span>`)">
                        <svg class="bi" width="16" height="16"><use href="#cloud-plus"></use></svg>
                        <span x-text="translations[currentLang].settings || 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª'"></span>
                      </a>
                    </div>
                  </div>

                  <div class="config-link">
                    <div class="config-link-name">
                      <svg class="bi" width="16" height="16"><use href="#gear-fill"></use></svg>
                      <span x-text="translations[currentLang].singboxSettings"></span>
                    </div>
                    <div class="config-link-buttons">
                      <a class="settings-button" 
                         href="#" 
                         @click.prevent="importSingbox(); handleButtonFeedback($el, $el.innerHTML, `<svg class='bi' width='16' height='16'><use href='#cloud-check'></use></svg> <span>${translations[currentLang].enter}</span>`)">
                        <svg class="bi" width="16" height="16"><use href="#cloud-plus"></use></svg>
                        <span x-text="translations[currentLang].settings || 'ØªÙ†Ø¸ÛŒÙ…Ø§Øª'"></span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="my-block-big">
                <span class="my-step-counter mb-3"></span>
                <h5 class="my-text-heading fw-semibold" x-text="translations[currentLang].connectAndUse"></h5>
                <p class="my-text-content mb-2" x-text="translations[currentLang].connectAndUseDesc"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
 
  <div class="modal qr-modal fade" id="qr-modal" tabindex="-1" aria-labelledby="qrModalLabel" 
       x-data="{ title: '' }" @show-qr-title.window="title = $event.detail">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="my-text-heading" id="qrModalLabel" x-text="title"></h5>
          <button type="button" class="modal-close-btn" data-bs-dismiss="modal">
            <span x-text="$store.app.translations[$store.app.currentLang].close"></span>
          </button>
        </div>
        <div class="modal-body">
          <div id="qr-canvas"></div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
